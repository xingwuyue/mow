{"version":3,"sources":["file:///G:/Cocos/KillGrass/gecao/assets/scripts/EnemyManager.ts"],"names":["_decorator","Component","Node","ccclass","property","EnemyManager","type","tooltip","_enemies","onLoad","instance","onDestroy","getPlayerNode","playerNode","getEnemies","filter","enemy","isValid","addEnemy","indexOf","push","removeEnemy","index","splice"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,I,OAAAA,I;;;;;;;;;OAC1B;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;8BAGjBK,Y,WADZF,OAAO,CAAC,cAAD,C,UAEHC,QAAQ,CAAC;AAAEE,QAAAA,IAAI,EAAEJ,IAAR;AAAcK,QAAAA,OAAO,EAAE;AAAvB,OAAD,C,sCAFb,MACaF,YADb,SACkCJ,SADlC,CAC4C;AAAA;AAAA;;AAAA;;AAAA,eAMhCO,QANgC,GAMb,EANa;AAAA;;AAQxCC,QAAAA,MAAM,GAAG;AACLJ,UAAAA,YAAY,CAACK,QAAb,GAAwB,IAAxB;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACRN,UAAAA,YAAY,CAACK,QAAb,GAAwB,IAAxB;AACH;;AAEME,QAAAA,aAAa,GAAS;AACzB,iBAAO,KAAKC,UAAZ;AACH,SAlBuC,CAoBxC;;;AACOC,QAAAA,UAAU,GAAW;AACxB;AACA,eAAKN,QAAL,GAAgB,KAAKA,QAAL,CAAcO,MAAd,CAAqBC,KAAK,IAAIA,KAAK,IAAIA,KAAK,CAACC,OAA7C,CAAhB;AACA,iBAAO,KAAKT,QAAZ;AACH,SAzBuC,CA2BxC;;;AACOU,QAAAA,QAAQ,CAACF,KAAD,EAAc;AACzB,cAAI,KAAKR,QAAL,CAAcW,OAAd,CAAsBH,KAAtB,MAAiC,CAAC,CAAtC,EAAyC;AACrC,iBAAKR,QAAL,CAAcY,IAAd,CAAmBJ,KAAnB;AACH;AACJ,SAhCuC,CAkCxC;;;AACOK,QAAAA,WAAW,CAACL,KAAD,EAAc;AAC5B,cAAMM,KAAK,GAAG,KAAKd,QAAL,CAAcW,OAAd,CAAsBH,KAAtB,CAAd;;AACA,cAAIM,KAAK,GAAG,CAAC,CAAb,EAAgB;AACZ,iBAAKd,QAAL,CAAce,MAAd,CAAqBD,KAArB,EAA4B,CAA5B;AACH;AACJ;;AAxCuC,O,UAI1BZ,Q,GAAyB,I;;;;;iBAFb,I","sourcesContent":["import { _decorator, Component, Node } from 'cc';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('EnemyManager')\r\nexport class EnemyManager extends Component {\r\n    @property({ type: Node, tooltip: '玩家节点' })\r\n    public playerNode: Node = null;\r\n\r\n    public static instance: EnemyManager = null;\r\n\r\n    private _enemies: Node[] = [];\r\n\r\n    onLoad() {\r\n        EnemyManager.instance = this;\r\n    }\r\n\r\n    onDestroy() {\r\n        EnemyManager.instance = null;\r\n    }\r\n\r\n    public getPlayerNode(): Node {\r\n        return this.playerNode;\r\n    }\r\n\r\n    // 添加获取敌人列表的方法\r\n    public getEnemies(): Node[] {\r\n        // 清理无效的敌人节点\r\n        this._enemies = this._enemies.filter(enemy => enemy && enemy.isValid);\r\n        return this._enemies;\r\n    }\r\n\r\n    // 添加敌人到管理器\r\n    public addEnemy(enemy: Node) {\r\n        if (this._enemies.indexOf(enemy) === -1) {\r\n            this._enemies.push(enemy);\r\n        }\r\n    }\r\n\r\n    // 从管理器移除敌人\r\n    public removeEnemy(enemy: Node) {\r\n        const index = this._enemies.indexOf(enemy);\r\n        if (index > -1) {\r\n            this._enemies.splice(index, 1);\r\n        }\r\n    }\r\n}"]}